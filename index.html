<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>PEMILOS - Situs Resmi Pemilihan Ketua dan Wakil Ketua OSIM MTSN 3 Tulungagung</title>
    <meta name="description" content="Pemilihan Ketua dan Wakil Ketua OSIM MTSN 3 Tulungagung. Ikuti perkembangan kandidat, timeline, dan informasi pemilihan secara real-time.">
    <meta name="keywords" content="pemilos, osim, mtsn 3 tulungagung, pemilihan osim, pemilos, organisasi siswa, madrasah tsanawiyah, tulungagung, pemilihan ketua osim">
    <meta name="author" content="Panitia Pemilihan OSIM MTSN 3 Tulungagung">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pemilos.ossnega.web.id/">
    <meta property="og:title" content="Pemilos 2025 - Pemilihan OSIM MTSN 3 Tulungagung">
    <meta property="og:description" content="Pemilihan Ketua dan Wakil Ketua OSIM. Bersatu Maju, Wujudkan Prestasi Gemilang! Ikuti perkembangan kandidat dan informasi pemilihan.">
    <meta property="og:image" content="https://pemilos.ossnega.web.id/assets/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:alt" content="Pemilos 2025 - Pemilihan OSIM MTSN 3 Tulungagung - Banner Official">
    <meta property="og:site_name" content="Pemilos MTSN 3 Tulungagung">
    <meta property="og:locale" content="id_ID">
    <meta property="og:updated_time" content="2024-12-19T00:00:00+07:00">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://pemilos.ossnega.web.id/">
    <meta property="twitter:title" content="Pemilos 2025 - Pemilihan OSIM MTSN 3 Tulungagung">
    <meta property="twitter:description" content="Pemilihan Ketua dan Wakil Ketua OSIM periode 2025-2026. Bersatu Maju, Wujudkan Prestasi Gemilang!">
    <meta property="twitter:image" content="https://pemilos.ossnega.web.id/assets/og-image.png">
    <meta property="twitter:image:alt" content="Pemilos 2025 - Pemilihan OSIM MTSN 3 Tulungagung">
    <meta property="twitter:creator" content="@ossnega">
    <meta property="twitter:site" content="@ossnega">

    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#06326c">
    <meta name="msapplication-TileColor" content="#06326c">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Pemilos 2025">
    <meta name="application-name" content="Pemilos 2025">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">

    <!-- Canonical & Alternate URLs -->
    <link rel="canonical" href="https://pemilos.ossnega.web.id/">
    <link rel="alternate" hreflang="id" href="https://pemilos.ossnega.web.id/">
    <link rel="alternate" hreflang="x-default" href="https://pemilos.ossnega.web.id/">

    <!-- Favicon & App Icons -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#06326c">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://iili.io/foKDUYb.png" as="image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- PWA CSS -->
    <link rel="stylesheet" href="css/pwa.css">

    <!-- Theme Color -->
    <meta name="theme-color" content="#003366">

    <!-- Viewport for PWA -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Structured Data for Rich Results -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Event",
          "@id": "https://pemilos.ossnega.web.id/",
          "name": "Pemilos 2025 - Pemilihan OSIM MTSN 3 Tulungagung",
          "description": "Pemilihan Ketua dan Wakil Ketua OSIM periode 2025-2026 MTSN 3 Tulungagung",
          "startDate": "2025-10-15T08:00:00+07:00",
          "endDate": "2025-10-17T15:00:00+07:00",
          "eventStatus": "https://schema.org/EventScheduled",
          "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
          "location": {
            "@type": "Place",
            "name": "MTSN 3 Tulungagung",
            "address": {
              "@type": "PostalAddress",
              "streetAddress": "Jl. Raya Tulungagung No. 123",
              "addressLocality": "Tulungagung",
              "addressRegion": "Jawa Timur",
              "postalCode": "66281",
              "addressCountry": "ID"
            }
          },
          "organizer": {
            "@type": "Organization",
            "name": "OSIM MTSN 3 Tulungagung",
            "url": "https://ossnega.web.id",
            "email": "halossnega@gmail.com"
          },
          "image": [
            "https://iili.io/foKDUYb.png"
          ],
          "performer": {
            "@type": "Organization",
            "name": "Panitia Pemilihan OSIM MTSN 3 Tulungagung"
          },
          "offers": {
            "@type": "Offer",
            "url": "https://pemilos.mtsn3tulungagung.sch.id/",
            "availability": "https://schema.org/InStock",
            "price": "0",
            "priceCurrency": "IDR"
          }
        },
        {
          "@type": "WebSite",
          "@id": "https://pemilos.ossnega.web.id/",
          "url": "https://pemilos.ossnega.web.id/",
          "name": "Pemilos 2025",
          "description": "Website resmi Pemilihan OSIM MTSN 3 Tulungagung 2025",
          "publisher": {
            "@id": "https://pemilos.ossnega.web.id/"
          },
          "inLanguage": "id-ID"
        },
        {
          "@type": "Organization",
          "@id": "https://pemilos.ossnega.web.id/",
          "name": "OSIM MTSN 3 Tulungagung",
          "url": "https://ossnega.web.id",
          "logo": "https://iili.io/foKDUYb.png",
          "sameAs": [
            "https://www.instagram.com/ossnega"
          ]
        }
      ]
    }
    </script>

    <!-- Additional SEO for Education -->
    <meta name="classification" content="Education, Student Organization, School Election">
    <meta name="topic" content="Student Election OSIM MTSN 3 Tulungagung 2025">
    <meta name="coverage" content="Worldwide">
    <meta name="distribution" content="Global">
    <meta name="rating" content="General">
    <meta name="revisit-after" content="7 days">

    <!-- Geo Tags -->
    <meta name="geo.region" content="ID-JI">
    <meta name="geo.placename" content="Tulungagung">
    <meta name="geo.position" content="-8.065;111.902">
    <meta name="ICBM" content="-8.065, 111.902">
    
    <!-- CDN Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,100..900;1,100..900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/components.css">

    <style>
        /* CSS untuk alert banner yang hilang otomatis */
        .alert-banner {
            transition: all 0.5s ease-in-out;
            overflow: hidden;
            max-height: 100px;
        }
        
        .alert-banner.hidden {
            max-height: 0;
            opacity: 0;
            padding-top: 0;
            padding-bottom: 0;
            margin: 0;
            border: none;
        }
        
        /* WhatsApp widget styling */
        .whatsapp-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            transition: transform 0.3s ease;
        }
        
        .whatsapp-widget:hover {
            transform: scale(1.1);
        }
        
        /* Cookie consent styling */
        .cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px;
            z-index: 1001;
            transition: all 0.5s ease;
        }
        
        .cookie-consent.hidden {
            transform: translateY(100%);
            opacity: 0;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 batik-bg">
    <!-- Alert Banner dengan auto-hide -->
    <div id="officialAlert" class="alert-banner bg-blue-800 text-white py-3">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <span class="font-bold text-sm md:text-base">üèõÔ∏è WEBSITE RESMI PEMILOS 2025 - Semua informasi di website ini adalah informasi resmi dan valid</span>
            <button id="closeAlert" class="text-white hover:text-yellow-300 ml-4 flex-shrink-0">
                <i class='bx bx-x text-xl'></i>
            </button>
        </div>
    </div>

    <!-- Include Components -->
    <div id="sidebar-container"></div>
    <div id="navbar-container"></div>
    <div id="whatsapp-container"></div>

    <!-- Main Content -->
    <div class="min-h-screen">
        <!-- Include Sections -->
        <div id="hero-section"></div>
        <div id="announcement-section"></div>
        <div id="twibbon-section"></div>
        <div id="candidates-section"></div>
        <div id="flyer-section"></div>
        <div id="how-to-vote-section"></div>
        <div id="timeline-section"></div>
        <div id="about-section"></div>
        <div id="question-section"></div>
        <div id="footer-section"></div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <!-- Custom JavaScript -->
    <script src="js/script.js"></script>
    <script src="js/countdown.js"></script>
    <script src="js/cookie-consent.js"></script>
    <!-- PWA JavaScript -->
    <script src="js/pwa.js"></script>
    <script src="js/offline.js"></script>
    <script src="js/install-promotion.js"></script>
    
    <!-- Load Components dengan perbaikan -->
    <script>
        // Load components secara berurutan
        const loadComponents = async () => {
            try {
                // Load cookie consent first
                try {
                    const cookieConsent = await fetch('components/cookie-consent.html');
                    const cookieData = await cookieConsent.text();
                    const cookieContainer = document.createElement('div');
                    cookieContainer.innerHTML = cookieData;
                    document.body.appendChild(cookieContainer);
                } catch (error) {
                    console.error('Error loading cookie consent:', error);
                }

                // Load sidebar
                try {
                    const sidebar = await fetch('components/sidebar.html');
                    document.getElementById('sidebar-container').innerHTML = await sidebar.text();
                } catch (error) {
                    console.error('Error loading sidebar:', error);
                }

                // Load navbar
                try {
                    const navbar = await fetch('components/navbar.html');
                    document.getElementById('navbar-container').innerHTML = await navbar.text();
                } catch (error) {
                    console.error('Error loading navbar:', error);
                }

                // Load whatsapp widget dengan fallback
                try {
                    const whatsapp = await fetch('components/whatsapp-widget.html');
                    const whatsappData = await whatsapp.text();
                    document.getElementById('whatsapp-container').innerHTML = whatsappData;
                    
                    // Fallback WhatsApp widget jika file tidak ada
                    if (whatsappData.trim() === '') {
                        document.getElementById('whatsapp-container').innerHTML = `
                            <div class="whatsapp-widget">
                                <a href="https://wa.me/6281234567890?text=Halo%20Panitia%20PEMILOS%202025" 
                                   target="_blank" 
                                   class="bg-green-500 text-white p-4 rounded-full shadow-lg flex items-center justify-center"
                                   aria-label="Hubungi kami via WhatsApp">
                                    <i class='bx bxl-whatsapp text-2xl'></i>
                                </a>
                            </div>
                        `;
                    }
                } catch (error) {
                    console.error('Error loading WhatsApp widget:', error);
                    // Fallback WhatsApp widget
                    document.getElementById('whatsapp-container').innerHTML = `
                        <div class="whatsapp-widget">
                            <a href="https://wa.me/6281234567890?text=Halo%20Panitia%20PEMILOS%202025" 
                               target="_blank" 
                               class="bg-green-500 text-white p-4 rounded-full shadow-lg flex items-center justify-center"
                               aria-label="Hubungi kami via WhatsApp">
                                <i class='bx bxl-whatsapp text-2xl'></i>
                            </a>
                        </div>
                    `;
                }

                // Load install promotion
                try {
                    const installPromo = await fetch('components/install-promotion.html');
                    const installData = await installPromo.text();
                    const installContainer = document.createElement('div');
                    installContainer.innerHTML = installData;
                    document.body.appendChild(installContainer);
                } catch (error) {
                    console.error('Error loading install promotion:', error);
                }

                // Load semua sections
                const sections = [
                    { id: 'hero-section', file: 'sections/hero.html' },
                    { id: 'announcement-section', file: 'sections/announcement.html' },
                    { id: 'twibbon-section', file: 'sections/twibbon.html' },
                    { id: 'candidates-section', file: 'sections/candidates.html' },
                    { id: 'flyer-section', file: 'sections/flyer.html' },
                    { id: 'how-to-vote-section', file: 'sections/how-to-vote.html' },
                    { id: 'timeline-section', file: 'sections/timeline.html' },
                    { id: 'about-section', file: 'sections/about.html' },
                    { id: 'question-section', file: 'sections/question.html' },
                    { id: 'footer-section', file: 'components/footer.html' }
                ];

                for (const section of sections) {
                    try {
                        const response = await fetch(section.file);
                        if (response.ok) {
                            document.getElementById(section.id).innerHTML = await response.text();
                        } else {
                            document.getElementById(section.id).innerHTML = `
                                <div class="container mx-auto px-4 py-8 text-center">
                                    <h2 class="text-xl font-bold text-gray-700">Bagian ${section.id.replace('-section', '')} sedang dalam persiapan</h2>
                                    <p class="text-gray-600 mt-2">Konten akan segera tersedia</p>
                                </div>
                            `;
                        }
                    } catch (error) {
                        console.error(`Error loading ${section.file}:`, error);
                        document.getElementById(section.id).innerHTML = `
                            <div class="container mx-auto px-4 py-8 text-center">
                                <h2 class="text-xl font-bold text-red-600">Gagal memuat konten</h2>
                                <p class="text-gray-600 mt-2">Silakan refresh halaman</p>
                            </div>
                        `;
                    }
                }

                // Initialize AOS setelah semua konten dimuat
                if (typeof AOS !== 'undefined') {
                    AOS.init({
                        duration: 800,
                        once: true,
                        offset: 100
                    });
                }

                // Setup event listeners setelah komponen dimuat
                setupEventListeners();

            } catch (error) {
                console.error('Error loading components:', error);
                
                // Fallback: tampilkan pesan error
                document.querySelectorAll('[id$="-section"]').forEach(el => {
                    if (el.innerHTML === '') {
                        el.innerHTML = '<div class="text-center p-8 text-red-600">Gagal memuat konten. Silakan refresh halaman.</div>';
                    }
                });
            }
        };

        // Setup event listeners untuk alert dan cookie
        function setupEventListeners() {
            // Alert banner auto-hide dan manual close
            const alertBanner = document.getElementById('officialAlert');
            const closeAlertBtn = document.getElementById('closeAlert');
            
            if (alertBanner) {
                // Auto hide setelah 10 detik
                setTimeout(() => {
                    alertBanner.classList.add('hidden');
                }, 10000);
                
                // Manual close
                if (closeAlertBtn) {
                    closeAlertBtn.addEventListener('click', () => {
                        alertBanner.classList.add('hidden');
                    });
                }
            }
            
            // Cookie consent close functionality
            const cookieConsent = document.querySelector('.cookie-consent');
            const acceptCookiesBtn = document.getElementById('acceptCookies');
            
            if (cookieConsent && acceptCookiesBtn) {
                acceptCookiesBtn.addEventListener('click', () => {
                    cookieConsent.classList.add('hidden');
                    // Set cookie untuk mengingat pilihan user
                    document.cookie = "cookiesAccepted=true; max-age=2592000; path=/"; // 30 hari
                });
            }
            
            // Fallback jika cookie consent button tidak ada
            setTimeout(() => {
                const fallbackAcceptBtn = document.getElementById('acceptCookies');
                if (!fallbackAcceptBtn && cookieConsent) {
                    const newAcceptBtn = document.createElement('button');
                    newAcceptBtn.textContent = 'Saya Mengerti';
                    newAcceptBtn.className = 'bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors';
                    newAcceptBtn.addEventListener('click', () => {
                        cookieConsent.classList.add('hidden');
                        document.cookie = "cookiesAccepted=true; max-age=2592000; path=/";
                    });
                    
                    const cookieContent = cookieConsent.querySelector('div');
                    if (cookieContent) {
                        cookieContent.appendChild(newAcceptBtn);
                    }
                }
            }, 1000);
        }

        // Jalankan ketika DOM siap
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadComponents);
        } else {
            loadComponents();
        }
    </script>
</body>
</html>
